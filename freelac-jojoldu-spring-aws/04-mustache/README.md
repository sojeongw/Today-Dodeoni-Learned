# 머스테치로 화면 구성하기

## 서버 템플릿 엔진

일반적으로 웹 개발에서 템플릿 엔진이란, 지정된 템플릿 양식과 데이터가 함쳐져 HTML 문서를 출력하는 소프트웨어를 말한다. JSP, Freemaker는 서버 템플릿 엔진이고 React, Vue는 클라이언트 템플릿 엔진이다.

> JSP는 명확하게는 서버 템플릿 엔진이 아니지만, View 역할만 할 때는 템플릿 엔진으로 사용할 수 있다. Spring + JSP로 사용한 경우가 대표적이다.

서버 템플릿 엔진을 이용하면 서버에서 Java 코드로 문자열 생성한 뒤, 문자열을 HTML로 변환해 브라우저로 전달한다.

```jsp
<script type="text/javascript">

$(document).ready(function() {
   if(a=="1") {
        <%System.out.println("test");%>
   }
});
</script>
```

위의 코드는 HTML을 만드는 과정에서 `System.out.println("test")`을 실행할 뿐이며 자바스크립트 코드는 단순한 문자열일 뿐이다. 따라서 if문과 관계없이 무조건 test를 콘솔에 출력한다.

반면, 자바스크립트는 브라우저 위에서 작동한다. 즉, 위에 있는 if문은 서버 템플릿 엔진의 영역에서 벗어나있기 때문에 제어할 수 없다.

> 흔히 말하는 Vue.js나 React.js를 이용한 SPA(Single Page Application)는 브라우저에서 화면을 생성한다. 즉, 서버에서 이미 코드가 벗어난 경우다. 이럴 때는 서버에서 JSON이나 XML 데이터만 전달하고 클라이언트에서 조립한다. 

> 최근에는 자바스크립트 프레임워크의 화면 생성을 서버에서 하기도 하는데, 이것을 `서버 사이드 렌더링`이라고 한다. 이는 Nashor, J2V8 등의 V8 엔진 라이브러리의 지원 덕분이다. 

### JSP, Velocity

- 스프링부트에서는 권장하지 않는 템플릿 엔진이다.

### Freemarker

- 과하게 많은 기능을 지원한다. 
    - 높은 자유도 때문에 숙련도가 낮을 수록 Freemarker 안에 비즈니스 로직이 추가될 확률이 높다.

### Thymeleaf

- 스프링 진영에서 밀고 있지만 문법이 어렵다. 
    - HTML 태그 속성으로 템플릿 기능을 사용하는 방식이 높은 허들로 느껴진다. 
    - Vue.js를 사용해 본 경험이 있어 태그 속성 방식이 익숙하다면 선택해도 된다.

### 머스테치

- 현존하는 대부분의 언어를 지원하는 가장 심플한 템플릿 엔진이다.
- 로직 코드를 사용할 수 없어 View의 역할과 서버의 역할이 명확하게 분리된다.
- Mustache.js와 Mustache.java 2가지가 있어 하나의 문법으로 클라이언트와 서버 템플릿을 모두 사용할 수 있다.