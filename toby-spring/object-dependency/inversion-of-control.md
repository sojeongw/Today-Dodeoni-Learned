# 제어의 역전

## 개념

제어의 역전\(Inversion of Control, IoC\)은 프로그램의 제어 흐름 구조가 거꾸로 되는 것이다.

원래 프로그램은 `main()` 에서 시작해 사용할 오브젝트를 결정하고 그 오브젝트를 만들어 안에 있는 메소드를 호출하는 일을 반복한다. `main()` 이 `능동적으로` 무엇을 사용할지 결정고 만드는 구조다.

제어의 역전은 스스로 무슨 오브젝트를 사용할지 선택하지 않는다.생성하지도 않고 자기 자신도 어떻게 만들어지고 사용되는지 모른다.모든 권한을 제 3자에게 넘긴다. 그냥 기능만 구현해놓으면 자신은 필요할 때 호출되어 사용되는 `수동적인` 구조다.

## 대표적인 예

### 프레임워크

| 라이브러리 | 프레임워크 |
| :---: | :---: |
| 애플리케이션 흐름을 직접 제어하고 필요할 때 능동적으로 라이브러리를 사용함 | 프레임워크가 흐름을 주도하는 도중에 애플리케이션 코드를 프레임워크가 사용함 |

최근 툴킷, 엔진, 라이브러리 등이 유행하면서 `프레임워크`라고 불리기도 하는데 이는 잘못된 것이다. `프레임워크`에는 `제어의 역전` 개념이 분명히 적용되어 있어야 한다. 애플리케이션 코드가 `프레임워크`안에서 수동적으로 동작해야 한다.

### UserDao와 DaoFactory

원래 초기 코드에서 `ConnectionMaker`는 `UserDao`에 있었다. 그런데 지금은 `DaoFactory`에 있다. 어떤 구현 클래스를 사용할지 `DaoFactory`에게 위임했으니 이제 수동적으로 만들어지는 것이다.

